# שירות MCP אוטומטי לסריקת מודעות חדשות ביד2

שירות MCP (Model Context Protocol) אוטומטי שסורק מודעות חדשות באתר יד2 ומאפשר גם גישה דרך שיחה עם Claude.

## יתרונות המערכת המשופרת

- **הפעלה אוטומטית**: סריקה אוטומטית של כל הנושאים ללא התערבות ידנית
- **תיקון בעיות עברית**: טיפול מלא בבעיות תצוגה של עברית
- **גישה דרך Claude**: אפשרות לסרוק ולקבל עדכונים גם דרך שיחה עם Claude
- **התאמה אישית**: אפשרות להגדיר מספר נושאים לסריקה בקלות
- **התראות במייל**: אופציה לקבלת התראות מיידיות בדוא"ל
- **תמיכה מלאה בעברית**: ממשק והתראות בעברית

## התקנה מהירה

### 1. שבט (Clone) של המאגר
```bash
git clone https://github.com/Gingi892/yad2-mcp-service.git
cd yad2-mcp-service
```

### 2. התקנת החבילות הדרושות
```bash
pip install requests beautifulsoup4
```

### 3. הפעלת הסריקה האוטומטית
```bash
python auto_yad2.py
```
זו תפעיל את הסורק באופן אוטומטי, תיצור את כל הקבצים הדרושים, ותתחיל לסרוק את כל הנושאים המוגדרים.

## שימוש בסקריפט האוטומטי

הסקריפט האוטומטי (`auto_yad2.py`) מספק שתי אפשרויות הפעלה:

### סריקה רציפה (ברירת מחדל)
```bash
python auto_yad2.py
```
מפעיל את הסורק באופן רציף, עם הפסקות לפי הזמן המוגדר בקובץ התצורה (ברירת מחדל: 15 דקות).

### סריקה חד פעמית
```bash
python auto_yad2.py --once
```
מבצע סריקה אחת של כל הנושאים המוגדרים ומסיים.

## שימוש באמצעות שיחה עם Claude

אחרי שהתקנת את השירות, תוכל לשלוח פקודות ישירות לשירות דרך שיחה עם Claude.

### פקודות זמינות דרך Claude

1. **סריקת כל המודעות**:
   ```
   Yad2 MCP scan
   ```

2. **סריקת נושא ספציפי**:
   ```
   Yad2 MCP scan "דירות למכירה בת"א"
   ```

3. **הוספת נושא חדש**:
   ```
   Yad2 MCP add "דירות בחיפה" "https://www.yad2.co.il/realestate/forsale?city=4000"
   ```

4. **הצגת רשימת הנושאים**:
   ```
   Yad2 MCP list
   ```

5. **סריקה אוטומטית של כל הנושאים**:
   ```
   Yad2 MCP auto
   ```

6. **עזרה**:
   ```
   Yad2 MCP help
   ```

## שימוש ישיר דרך שורת הפקודה

ניתן להשתמש בשירות גם באופן ישיר דרך שורת הפקודה:

```bash
python yad2_scraper.py scan
python yad2_scraper.py add "דירות בירושלים" "https://www.yad2.co.il/realestate/forsale?city=3000"
python yad2_scraper.py list
python yad2_scraper.py auto
```

## הגדרת התראות דוא"ל

לקבלת התראות בדוא"ל, עדכן את חלק `email` בקובץ `config.json`:

```json
"email": {
  "enabled": true,
  "smtp_server": "smtp.gmail.com",
  "smtp_port": 587,
  "sender_email": "your-email@gmail.com",
  "sender_password": "your-app-password",
  "recipient_email": "your-email@gmail.com"
}
```

**שים לב**: עבור Gmail, יש להשתמש ב"סיסמה לאפליקציה" ולא בסיסמה הרגילה.

## נושאים ברירת מחדל

כאשר אתה מפעיל את הסקריפט האוטומטי בפעם הראשונה, הוא מגדיר 3 נושאי ברירת מחדל:

1. דירות למכירה בתל אביב
2. דירות למכירה בירושלים
3. דירות למכירה ברמת השרון

תוכל להוסיף, להסיר או לשנות נושאים בכל עת.

## הפעלה אוטומטית בעת הפעלת המחשב (Windows)

1. צור קובץ batch (`.bat`) באותה תיקייה עם התוכן הבא:
```batch
@echo off
cd /d %~dp0
python auto_yad2.py
```

2. צור קיצור דרך לקובץ זה
3. העתק את הקיצור דרך לתיקיית ההפעלה האוטומטית:
   `%APPDATA%\Microsoft\Windows\Start Menu\Programs\Startup`

## מבנה הפרויקט

- `yad2_scraper.py` - סקריפט ראשי לסריקה וניהול
- `auto_yad2.py` - סקריפט להפעלה אוטומטית
- `claude_interface.py` - ממשק לשימוש עם Claude
- `config.json` - קובץ הגדרות
- `data/` - תיקייה לשמירת נתונים על המודעות

## רישיון

פרויקט זה מופץ תחת רישיון MIT.

---

נוצר על ידי Claude כשירות MCP (Model Context Protocol) לסריקת אתר יד2.
